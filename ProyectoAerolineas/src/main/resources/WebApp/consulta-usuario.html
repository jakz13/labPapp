<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Usuario - Juan Viajes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .user-actions {
            display: flex;
            gap: 10px;
        }
        .card {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .card-header {
            background: linear-gradient(135deg, #3498db, #8e44ad);
            border-bottom: none;
        }
        .usuario-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .usuario-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        .usuario-card.selected {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        .usuario-imagen {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #e9ecef;
        }
        .info-badge {
            background-color: #e9ecef;
            color: #495057;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        .tabla-datos th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        .reserva-item, .paquete-item, .ruta-item {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            background-color: #f8f9fa;
        }
        .badge-estado {
            font-size: 0.75rem;
        }
        .dropdown-menu {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .dropdown-item:hover {
            background-color: #3498db;
            color: white;
        }
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="PaginaPrincipal.html">Juan Viajes</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
            <li class="nav-item">
                <a class="nav-link" href="PaginaPrincipal.html">Inicio</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="vuelosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Vuelos
                </a>
                <ul class="dropdown-menu" aria-labelledby="vuelosDropdown">
                    <li><a class="dropdown-item" href="consulta-vuelo.html">Consulta de Vuelo</a></li>
                    <li><a class="dropdown-item active" href="consulta-reserva.html">Consulta de Reserva</a></li>
                    <li><a class="dropdown-item" href="reserva-vuelo.html">Reserva de Vuelo</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" href="#" id="paquetesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Paquetes
                </a>
                <ul class="dropdown-menu" aria-labelledby="paquetesDropdown">
                    <li><a class="dropdown-item" href="consulta-paquete.html">Consulta de Paquete</a></li>
                    <li><a class="dropdown-item" href="compra-paquete.html">Compra de Paquete</a></li>
                    <li><a class="dropdown-item active" href="alta-paquete.html">Alta de Paquete</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="aerolineasDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Aerolíneas
                </a>
                <ul class="dropdown-menu" aria-labelledby="aerolineasDropdown">
                    <li><a class="dropdown-item" href="alta-ruta.html">Alta de Ruta</a></li>
                    <li><a class="dropdown-item" href="consulta-ruta.html">Consulta de Ruta</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="usuariosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Usuarios
                </a>
                <ul class="dropdown-menu" aria-labelledby="usuariosDropdown">
                    <li><a class="dropdown-item" href="alta-usuario.html">Alta de Usuario</a></li>
                    <li><a class="dropdown-item" href="consulta-usuario.html">Consulta de Usuario</a></li>
                    <li><a class="dropdown-item" href="modificar-usuario.html">Modificar Datos</a></li>
                </ul>
            </li>
        </ul>
        <div class="user-actions">
            <span class="navbar-text me-3">
                <i class="bi bi-person-gear"></i> Administrador
            </span>
            <a class="btn btn-outline-primary" href="PaginaPrincipal.html">Salir</a>
        </div>
    </div>
</nav>

<div class="container mt-4 mb-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card shadow-lg">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Consulta de Usuario</h4>
                    <p class="mb-0 mt-2 small">Explore los perfiles de usuarios registrados en el sistema</p>
                </div>
                <div class="card-body p-4">

                    <!-- Selección de Usuario -->
                    <div class="mb-4">
                        <label for="usuarioSelect" class="form-label h5">Seleccione un Usuario</label>
                        <select class="form-select form-select-lg" id="usuarioSelect">
                            <option value="">Seleccione un usuario para consultar...</option>
                            <option value="maria_gonzalez" data-tipo="cliente">María González (Cliente)</option>
                            <option value="carlos_rodriguez" data-tipo="cliente">Carlos Rodríguez (Cliente)</option>
                            <option value="zulyfly" data-tipo="aerolinea">ZulyFly Airlines (Aerolínea)</option>
                            <option value="iberia" data-tipo="aerolinea">Iberia (Aerolínea)</option>
                            <option value="copa_airlines" data-tipo="aerolinea">Copa Airlines (Aerolínea)</option>
                        </select>
                    </div>

                    <!-- Información del Usuario -->
                    <div id="infoUsuario" class="mt-4" style="display: none;">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Perfil del Usuario</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <!-- Imagen y datos básicos -->
                                    <div class="col-md-4 text-center">
                                        <img id="imagenUsuario" src="" alt="Imagen de usuario" class="usuario-imagen mb-3">
                                        <h4 id="nombreUsuario" class="text-primary"></h4>
                                        <p class="mb-1"><strong>Nickname:</strong> <span id="nicknameUsuario"></span></p>
                                        <p class="mb-1"><strong>Tipo:</strong> <span id="tipoUsuario" class="badge bg-primary"></span></p>
                                        <p class="mb-1"><strong>Correo:</strong> <span id="correoUsuario"></span></p>
                                        <p class="mb-0"><strong>Fecha registro:</strong> <span id="fechaRegistro"></span></p>
                                    </div>

                                    <!-- Información detallada -->
                                    <div class="col-md-8">
                                        <!-- Información específica para Clientes -->
                                        <div id="infoCliente" style="display: none;">
                                            <h6 class="text-primary mb-3">Información Personal</h6>
                                            <div class="table-responsive">
                                                <table class="table table-bordered tabla-datos">
                                                    <tr>
                                                        <th width="30%">Apellido</th>
                                                        <td id="clienteApellido"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Fecha Nacimiento</th>
                                                        <td id="clienteNacimiento"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Nacionalidad</th>
                                                        <td id="clienteNacionalidad"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Documento</th>
                                                        <td id="clienteDocumento"></td>
                                                    </tr>
                                                </table>
                                            </div>

                                            <!-- Reservas del Cliente -->
                                            <h6 class="text-primary mt-4 mb-3">Reservas de Vuelo</h6>
                                            <div id="reservasCliente" class="row g-2">
                                                <!-- Las reservas se cargarán dinámicamente -->
                                            </div>

                                            <!-- Paquetes Comprados -->
                                            <h6 class="text-primary mt-4 mb-3">Paquetes Comprados</h6>
                                            <div id="paquetesCliente" class="row g-2">
                                                <!-- Los paquetes se cargarán dinámicamente -->
                                            </div>
                                        </div>

                                        <!-- Información específica para Aerolíneas -->
                                        <div id="infoAerolinea" style="display: none;">
                                            <h6 class="text-primary mb-3">Información de la Aerolínea</h6>
                                            <div class="table-responsive">
                                                <table class="table table-bordered tabla-datos">
                                                    <tr>
                                                        <th width="30%">Descripción</th>
                                                        <td id="aerolineaDescripcion"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Sitio Web</th>
                                                        <td id="aerolineaWeb"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Fecha Registro</th>
                                                        <td id="aerolineaFechaRegistro"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Total Rutas</th>
                                                        <td><span id="totalRutas" class="badge bg-primary"></span></td>
                                                    </tr>
                                                </table>
                                            </div>

                                            <!-- Rutas de la Aerolínea -->
                                            <h6 class="text-primary mt-4 mb-3">Rutas de Vuelo</h6>
                                            <div class="mb-3">
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-outline-primary active" onclick="filtrarRutas('todas')">Todas</button>
                                                    <button type="button" class="btn btn-outline-primary" onclick="filtrarRutas('confirmada')">Confirmadas</button>
                                                    <button type="button" class="btn btn-outline-primary" onclick="filtrarRutas('ingresada')">Ingresadas</button>
                                                    <button type="button" class="btn btn-outline-primary" onclick="filtrarRutas('rechazada')">Rechazadas</button>
                                                </div>
                                            </div>
                                            <div id="rutasAerolinea" class="row g-2">
                                                <!-- Las rutas se cargarán dinámicamente -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Login -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Iniciar Sesión</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="loginEmail" class="form-label">Email o Nickname</label>
                        <input type="text" class="form-control" id="loginEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="loginPassword" class="form-label">Contraseña</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Iniciar Sesión</button>
                </form>
            </div>
            <div class="modal-footer">
                <p class="text-center w-100">¿No tienes cuenta? <a href="alta-usuario.html">Regístrate aquí</a></p>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Datos simulados de usuarios
    const usuarios = {
        "maria_gonzalez": {
            tipo: "Cliente",
            nombre: "María González",
            nickname: "maria_gonzalez",
            correo: "maria.gonzalez@email.com",
            fechaRegistro: "15/03/2024",
            imagen: "https://via.placeholder.com/120/3498db/ffffff?text=MG",
            datosPersonales: {
                apellido: "González",
                nacimiento: "12/08/1990",
                nacionalidad: "Uruguaya",
                documento: "Pasaporte: AB123456"
            },
            reservas: [
                { id: "RES-001", vuelo: "ZL1502001", fecha: "25/10/2024", estado: "Confirmada" },
                { id: "RES-002", vuelo: "IB6012201", fecha: "28/10/2024", estado: "Pendiente" }
            ],
            paquetes: [
                { id: "PKG-001", nombre: "Sudamérica Esencial", compra: "20/03/2024", vencimiento: "20/09/2024", estado: "Vigente" }
            ]
        },
        "carlos_rodriguez": {
            tipo: "Cliente",
            nombre: "Carlos Rodríguez",
            nickname: "carlos_rodr",
            correo: "carlos.rodriguez@email.com",
            fechaRegistro: "22/02/2024",
            imagen: "https://via.placeholder.com/120/e74c3c/ffffff?text=CR",
            datosPersonales: {
                apellido: "Rodríguez",
                nacimiento: "03/11/1985",
                nacionalidad: "Argentina",
                documento: "DNI: 35.123.456"
            },
            reservas: [],
            paquetes: []
        },
        "zulyfly": {
            tipo: "Aerolínea",
            nombre: "ZulyFly Airlines",
            nickname: "zulyfly",
            correo: "info@zulyfly.com",
            fechaRegistro: "10/01/2024",
            imagen: "https://via.placeholder.com/120/2ecc71/ffffff?text=ZF",
            descripcion: "Aerolínea uruguaya especializada en vuelos regionales dentro de Sudamérica.",
            sitioWeb: "https://www.zulyfly.com",
            rutas: [
                { id: "ZL1502", nombre: "Montevideo - Rio de Janeiro", estado: "Confirmada", fechaAlta: "15/01/2024" },
                { id: "ZL2001", nombre: "Montevideo - São Paulo", estado: "Confirmada", fechaAlta: "20/01/2024" },
                { id: "ZL3005", nombre: "Buenos Aires - Santiago", estado: "Ingresada", fechaAlta: "05/03/2024" },
                { id: "ZL4002", nombre: "Lima - Bogotá", estado: "Rechazada", fechaAlta: "12/02/2024" }
            ]
        },
        "iberia": {
            tipo: "Aerolínea",
            nombre: "Iberia",
            nickname: "iberia",
            correo: "contacto@iberia.com",
            fechaRegistro: "05/01/2024",
            imagen: "https://via.placeholder.com/120/9b59b6/ffffff?text=IB",
            descripcion: "Aerolínea bandera de España con conexiones a todo el mundo.",
            sitioWeb: "https://www.iberia.com",
            rutas: [
                { id: "IB6012", nombre: "Montevideo - Madrid", estado: "Confirmada", fechaAlta: "10/02/2024" },
                { id: "IB6015", nombre: "Madrid - París", estado: "Confirmada", fechaAlta: "15/02/2024" }
            ]
        }
    };

    let rutasFiltradas = [];

    // Cargar información del usuario seleccionado
    document.getElementById('usuarioSelect').addEventListener('change', function() {
        const usuarioId = this.value;
        const usuario = usuarios[usuarioId];

        if (usuario) {
            // Mostrar información básica
            document.getElementById('infoUsuario').style.display = 'block';
            document.getElementById('nombreUsuario').textContent = usuario.nombre;
            document.getElementById('nicknameUsuario').textContent = usuario.nickname;
            document.getElementById('correoUsuario').textContent = usuario.correo;
            document.getElementById('tipoUsuario').textContent = usuario.tipo;
            document.getElementById('fechaRegistro').textContent = usuario.fechaRegistro;
            document.getElementById('imagenUsuario').src = usuario.imagen;

            // Mostrar información específica según el tipo
            if (usuario.tipo === 'Cliente') {
                mostrarInfoCliente(usuario);
            } else if (usuario.tipo === 'Aerolínea') {
                mostrarInfoAerolinea(usuario);
            }
        } else {
            document.getElementById('infoUsuario').style.display = 'none';
        }
    });

    function mostrarInfoCliente(usuario) {
        // Mostrar sección de cliente y ocultar aerolínea
        document.getElementById('infoCliente').style.display = 'block';
        document.getElementById('infoAerolinea').style.display = 'none';

        // Datos personales
        document.getElementById('clienteApellido').textContent = usuario.datosPersonales.apellido;
        document.getElementById('clienteNacimiento').textContent = usuario.datosPersonales.nacimiento;
        document.getElementById('clienteNacionalidad').textContent = usuario.datosPersonales.nacionalidad;
        document.getElementById('clienteDocumento').textContent = usuario.datosPersonales.documento;

        // Reservas
        const reservasContainer = document.getElementById('reservasCliente');
        reservasContainer.innerHTML = '';

        if (usuario.reservas.length === 0) {
            reservasContainer.innerHTML = '<div class="col-12"><p class="text-muted">No tiene reservas registradas.</p></div>';
        } else {
            usuario.reservas.forEach(reserva => {
                const reservaHTML = `
                    <div class="col-md-6">
                        <div class="reserva-item">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1">${reserva.vuelo}</h6>
                                    <p class="mb-1 small">Código: ${reserva.id}</p>
                                    <p class="mb-0 small">Fecha: ${reserva.fecha}</p>
                                </div>
                                <span class="badge ${reserva.estado === 'Confirmada' ? 'bg-success' : 'bg-warning'} badge-estado">
                                    ${reserva.estado}
                                </span>
                            </div>
                        </div>
                    </div>
                `;
                reservasContainer.innerHTML += reservaHTML;
            });
        }

        // Paquetes
        const paquetesContainer = document.getElementById('paquetesCliente');
        paquetesContainer.innerHTML = '';

        if (usuario.paquetes.length === 0) {
            paquetesContainer.innerHTML = '<div class="col-12"><p class="text-muted">No ha comprado ningún paquete.</p></div>';
        } else {
            usuario.paquetes.forEach(paquete => {
                const paqueteHTML = `
                    <div class="col-md-6">
                        <div class="paquete-item">
                            <h6 class="mb-1">${paquete.nombre}</h6>
                            <p class="mb-1 small">Comprado: ${paquete.compra}</p>
                            <p class="mb-1 small">Vence: ${paquete.vencimiento}</p>
                            <span class="badge ${paquete.estado === 'Vigente' ? 'bg-success' : 'bg-secondary'} badge-estado">
                                ${paquete.estado}
                            </span>
                        </div>
                    </div>
                `;
                paquetesContainer.innerHTML += paqueteHTML;
            });
        }
    }

    function mostrarInfoAerolinea(usuario) {
        // Mostrar sección de aerolínea y ocultar cliente
        document.getElementById('infoCliente').style.display = 'none';
        document.getElementById('infoAerolinea').style.display = 'block';

        // Información de la aerolínea
        document.getElementById('aerolineaDescripcion').textContent = usuario.descripcion;
        document.getElementById('aerolineaWeb').innerHTML = usuario.sitioWeb ?
            `<a href="${usuario.sitioWeb}" target="_blank">${usuario.sitioWeb}</a>` : 'No especificado';
        document.getElementById('aerolineaFechaRegistro').textContent = usuario.fechaRegistro;
        document.getElementById('totalRutas').textContent = usuario.rutas.length;

        // Guardar rutas para filtrado
        rutasFiltradas = usuario.rutas;
        cargarRutasAerolinea('todas');
    }

    function cargarRutasAerolinea(filtro) {
        const rutasContainer = document.getElementById('rutasAerolinea');
        rutasContainer.innerHTML = '';

        const rutasFiltradas = filtro === 'todas' ?
            rutasFiltradas :
            rutasFiltradas.filter(ruta => ruta.estado.toLowerCase() === filtro);

        if (rutasFiltradas.length === 0) {
            rutasContainer.innerHTML = '<div class="col-12"><p class="text-muted">No hay rutas con el filtro seleccionado.</p></div>';
            return;
        }

        rutasFiltradas.forEach(ruta => {
            let badgeClass = '';
            switch(ruta.estado) {
                case 'Confirmada': badgeClass = 'bg-success'; break;
                case 'Ingresada': badgeClass = 'bg-warning'; break;
                case 'Rechazada': badgeClass = 'bg-danger'; break;
                default: badgeClass = 'bg-secondary';
            }

            const rutaHTML = `
                <div class="col-md-6">
                    <div class="ruta-item">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="mb-1">${ruta.nombre}</h6>
                                <p class="mb-1 small">Código: ${ruta.id}</p>
                                <p class="mb-0 small">Alta: ${ruta.fechaAlta}</p>
                            </div>
                            <span class="badge ${badgeClass} badge-estado">
                                ${ruta.estado}
                            </span>
                        </div>
                    </div>
                </div>
            `;
            rutasContainer.innerHTML += rutaHTML;
        });
    }

    function filtrarRutas(filtro) {
        // Actualizar botones activos
        document.querySelectorAll('.btn-group .btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');

        cargarRutasAerolinea(filtro);
    }

    // Mejorar la experiencia de usuario
    document.addEventListener('DOMContentLoaded', function() {
        // Agregar tooltips si es necesario
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>
</body>
</html>