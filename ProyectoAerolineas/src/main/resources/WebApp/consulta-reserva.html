<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Consulta de Reserva de Vuelo - Juan Viajes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .user-actions {
            display: flex;
            gap: 10px;
        }
        .card {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .card-header {
            background: linear-gradient(135deg, #3498db, #8e44ad);
            border-bottom: none;
        }
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        .step {
            text-align: center;
            flex: 1;
            position: relative;
            z-index: 2;
        }
        .step-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            font-weight: bold;
            border: 3px solid #e9ecef;
            font-size: 0.9rem;
        }
        .step.active .step-number {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        .step.completed .step-number {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }
        .step-line {
            position: absolute;
            top: 17px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e9ecef;
            z-index: 1;
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .reserva-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .reserva-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        .reserva-card.selected {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        .pasajero-item {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        .badge-estado {
            font-size: 0.75rem;
        }
        .dropdown-menu {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .dropdown-item:hover {
            background-color: #3498db;
            color: white;
        }
        .tipo-usuario {
            background-color: #e8f5e8;
            border-radius: 20px;
            padding: 8px 16px;
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-light">

<!-- Navbar consistente con PáginaPrincipal -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="PaginaPrincipal.html">Juan Viajes</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
            <li class="nav-item">
                <a class="nav-link" href="PaginaPrincipal.html">Inicio</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="vuelosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Vuelos
                </a>
                <ul class="dropdown-menu" aria-labelledby="vuelosDropdown">
                    <li><a class="dropdown-item" href="consulta-vuelo.html">Consulta de Vuelo</a></li>
                    <li><a class="dropdown-item active" href="consulta-reserva.html">Consulta de Reserva</a></li>
                    <li><a class="dropdown-item" href="reserva-vuelo.html">Reserva de Vuelo</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" href="#" id="paquetesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Paquetes
                </a>
                <ul class="dropdown-menu" aria-labelledby="paquetesDropdown">
                    <li><a class="dropdown-item" href="consulta-paquete.html">Consulta de Paquete</a></li>
                    <li><a class="dropdown-item" href="compra-paquete.html">Compra de Paquete</a></li>
                    <li><a class="dropdown-item active" href="alta-paquete.html">Alta de Paquete</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="aerolineasDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Aerolíneas
                </a>
                <ul class="dropdown-menu" aria-labelledby="aerolineasDropdown">
                    <li><a class="dropdown-item" href="alta-ruta.html">Alta de Ruta</a></li>
                    <li><a class="dropdown-item" href="consulta-ruta.html">Consulta de Ruta</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="usuariosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Usuarios
                </a>
                <ul class="dropdown-menu" aria-labelledby="usuariosDropdown">
                    <li><a class="dropdown-item" href="alta-usuario.html">Alta de Usuario</a></li>
                    <li><a class="dropdown-item" href="consulta-usuario.html">Consulta de Usuario</a></li>
                    <li><a class="dropdown-item" href="modificar-usuario.html">Modificar Datos</a></li>
                </ul>
            </li>
        </ul>
        <div class="user-actions">
            <span class="navbar-text me-3">
                <i class="bi bi-person-gear"></i> Administrador
            </span>
            <a class="btn btn-outline-primary" href="PaginaPrincipal.html">Salir</a>
        </div>
    </div>
</nav>

<div class="container mt-4 mb-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card shadow-lg">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Consulta de Reserva de Vuelo</h4>
                    <p class="mb-0 mt-2 small">Consulte la información detallada de sus reservas de vuelo</p>
                </div>
                <div class="card-body p-4">

                    <!-- Indicador de tipo de usuario -->
                    <div class="alert alert-info mb-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-person-check"></i>
                                <strong id="tipoUsuarioTexto">Cliente</strong> -
                                <span id="nombreUsuario">María González</span>
                            </div>
                            <button class="btn btn-outline-primary btn-sm" onclick="cambiarTipoUsuario()">
                                Cambiar a <span id="tipoAlternativo">Aerolínea</span>
                            </button>
                        </div>
                    </div>

                    <!-- Flujo para Cliente -->
                    <div id="flujoCliente">
                        <div class="step-indicator">
                            <div class="step-line"></div>
                            <div class="step active" id="stepCliente1">
                                <div class="step-number">1</div>
                                <div class="step-label">Seleccionar Aerolínea</div>
                            </div>
                            <div class="step" id="stepCliente2">
                                <div class="step-number">2</div>
                                <div class="step-label">Seleccionar Ruta</div>
                            </div>
                            <div class="step" id="stepCliente3">
                                <div class="step-number">3</div>
                                <div class="step-label">Seleccionar Vuelo</div>
                            </div>
                            <div class="step" id="stepCliente4">
                                <div class="step-number">4</div>
                                <div class="step-label">Ver Reserva</div>
                            </div>
                        </div>

                        <form id="formCliente">
                            <!-- Paso 1: Seleccionar Aerolínea -->
                            <div class="form-section active" id="sectionCliente1">
                                <h5 class="text-primary mb-4">Seleccionar Aerolínea</h5>

                                <div class="mb-3">
                                    <label for="aerolineaCliente" class="form-label">Aerolínea</label>
                                    <select class="form-select" id="aerolineaCliente">
                                        <option value="">Seleccione una aerolínea...</option>
                                        <option value="zulyfly">ZulyFly</option>
                                        <option value="iberia">Iberia</option>
                                        <option value="copa">Copa Airlines</option>
                                        <option value="american">American Airlines</option>
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <div></div>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoCliente(2)" id="btnCliente1" disabled>
                                        Siguiente <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 2: Seleccionar Ruta -->
                            <div class="form-section" id="sectionCliente2">
                                <h5 class="text-primary mb-4">Seleccionar Ruta</h5>

                                <div class="mb-3">
                                    <label for="rutaCliente" class="form-label">Ruta de Vuelo</label>
                                    <select class="form-select" id="rutaCliente">
                                        <option value="">Seleccione una ruta...</option>
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoCliente(1)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoCliente(3)" id="btnCliente2" disabled>
                                        Siguiente <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 3: Seleccionar Vuelo -->
                            <div class="form-section" id="sectionCliente3">
                                <h5 class="text-primary mb-4">Seleccionar Vuelo</h5>

                                <div class="mb-3">
                                    <label for="vueloCliente" class="form-label">Vuelo</label>
                                    <select class="form-select" id="vueloCliente">
                                        <option value="">Seleccione un vuelo...</option>
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoCliente(2)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoCliente(4)" id="btnCliente3" disabled>
                                        Consultar Reserva <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 4: Ver Reserva -->
                            <div class="form-section" id="sectionCliente4">
                                <h5 class="text-primary mb-4">Detalles de la Reserva</h5>

                                <div id="reservaClienteDetalle">
                                    <!-- La información de la reserva se cargará aquí -->
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoCliente(3)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-success" onclick="nuevaConsulta()">
                                        <i class="bi bi-arrow-repeat"></i> Nueva Consulta
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Flujo para Aerolínea -->
                    <div id="flujoAerolinea" style="display: none;">
                        <div class="step-indicator">
                            <div class="step-line"></div>
                            <div class="step active" id="stepAerolinea1">
                                <div class="step-number">1</div>
                                <div class="step-label">Seleccionar Ruta</div>
                            </div>
                            <div class="step" id="stepAerolinea2">
                                <div class="step-number">2</div>
                                <div class="step-label">Seleccionar Vuelo</div>
                            </div>
                            <div class="step" id="stepAerolinea3">
                                <div class="step-number">3</div>
                                <div class="step-label">Seleccionar Reserva</div>
                            </div>
                            <div class="step" id="stepAerolinea4">
                                <div class="step-number">4</div>
                                <div class="step-label">Ver Detalles</div>
                            </div>
                        </div>

                        <form id="formAerolinea">
                            <!-- Paso 1: Seleccionar Ruta -->
                            <div class="form-section active" id="sectionAerolinea1">
                                <h5 class="text-primary mb-4">Seleccionar Ruta</h5>

                                <div class="mb-3">
                                    <label for="rutaAerolinea" class="form-label">Ruta de Vuelo</label>
                                    <select class="form-select" id="rutaAerolinea">
                                        <option value="">Seleccione una ruta...</option>
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <div></div>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoAerolinea(2)" id="btnAerolinea1" disabled>
                                        Siguiente <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 2: Seleccionar Vuelo -->
                            <div class="form-section" id="sectionAerolinea2">
                                <h5 class="text-primary mb-4">Seleccionar Vuelo</h5>

                                <div class="mb-3">
                                    <label for="vueloAerolinea" class="form-label">Vuelo</label>
                                    <select class="form-select" id="vueloAerolinea">
                                        <option value="">Seleccione un vuelo...</option>
                                    </select>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoAerolinea(1)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoAerolinea(3)" id="btnAerolinea2" disabled>
                                        Siguiente <i class="bi bi-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 3: Seleccionar Reserva -->
                            <div class="form-section" id="sectionAerolinea3">
                                <h5 class="text-primary mb-4">Seleccionar Reserva</h5>

                                <div id="listaReservasAerolinea" class="row g-3">
                                    <!-- Las reservas se cargarán dinámicamente -->
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoAerolinea(2)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-primary" onclick="siguientePasoAerolinea(4)" id="btnAerolinea3" disabled>
                                        Ver Detalles <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Paso 4: Ver Detalles -->
                            <div class="form-section" id="sectionAerolinea4">
                                <h5 class="text-primary mb-4">Detalles de la Reserva</h5>

                                <div id="reservaAerolineaDetalle">
                                    <!-- La información de la reserva se cargará aquí -->
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary" onclick="siguientePasoAerolinea(3)">
                                        <i class="bi bi-arrow-left"></i> Anterior
                                    </button>
                                    <button type="button" class="btn btn-success" onclick="nuevaConsulta()">
                                        <i class="bi bi-arrow-repeat"></i> Nueva Consulta
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Datos de ejemplo
    const datos = {
        aerolineas: {
            'zulyfly': {
                nombre: 'ZulyFly Airlines',
                rutas: {
                    'ZL1502': {
                        nombre: 'Montevideo - Rio de Janeiro',
                        vuelos: {
                            'ZL1502001': {
                                fecha: '25/10/2024',
                                reservas: [
                                    {
                                        id: 'RES-2024-ZL001',
                                        cliente: 'María González',
                                        pasajeros: ['María González', 'Carlos Rodríguez'],
                                        tipoAsiento: 'Ejecutivo',
                                        cantidadPasajes: 2,
                                        equipajeExtra: 1,
                                        costoTotal: 1100,
                                        fechaReserva: '15/10/2024',
                                        estado: 'Confirmada'
                                    }
                                ]
                            }
                        }
                    }
                }
            },
            'iberia': {
                nombre: 'Iberia',
                rutas: {
                    'IB6012': {
                        nombre: 'Montevideo - Madrid',
                        vuelos: {
                            'IB6012201': {
                                fecha: '28/10/2024',
                                reservas: [
                                    {
                                        id: 'RES-2024-IB001',
                                        cliente: 'María González',
                                        pasajeros: ['María González'],
                                        tipoAsiento: 'Turista',
                                        cantidadPasajes: 1,
                                        equipajeExtra: 0,
                                        costoTotal: 750,
                                        fechaReserva: '10/10/2024',
                                        estado: 'Confirmada'
                                    }
                                ]
                            }
                        }
                    }
                }
            }
        },
        aerolineaActual: 'zulyfly' // Para cuando el usuario es aerolínea
    };

    // Variables globales
    let tipoUsuario = 'cliente'; // 'cliente' o 'aerolinea'
    let reservaSeleccionada = null;

    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
        cargarDatosIniciales();
        configurarEventListeners();
    });

    function cargarDatosIniciales() {
        // Cargar rutas para aerolínea
        cargarRutasAerolinea();
    }

    function configurarEventListeners() {
        // Cliente
        document.getElementById('aerolineaCliente').addEventListener('change', function() {
            const aerolinea = this.value;
            cargarRutasCliente(aerolinea);
            document.getElementById('btnCliente1').disabled = !aerolinea;
        });

        document.getElementById('rutaCliente').addEventListener('change', function() {
            const aerolinea = document.getElementById('aerolineaCliente').value;
            const ruta = this.value;
            cargarVuelosCliente(aerolinea, ruta);
            document.getElementById('btnCliente2').disabled = !ruta;
        });

        document.getElementById('vueloCliente').addEventListener('change', function() {
            document.getElementById('btnCliente3').disabled = !this.value;
        });

        // Aerolínea
        document.getElementById('rutaAerolinea').addEventListener('change', function() {
            const ruta = this.value;
            cargarVuelosAerolinea(ruta);
            document.getElementById('btnAerolinea1').disabled = !ruta;
        });

        document.getElementById('vueloAerolinea').addEventListener('change', function() {
            const ruta = document.getElementById('rutaAerolinea').value;
            const vuelo = this.value;
            cargarReservasAerolinea(ruta, vuelo);
            document.getElementById('btnAerolinea2').disabled = !vuelo;
        });
    }

    // Funciones para Cliente
    function siguientePasoCliente(paso) {
        if (paso === 4) {
            const aerolinea = document.getElementById('aerolineaCliente').value;
            const ruta = document.getElementById('rutaCliente').value;
            const vuelo = document.getElementById('vueloCliente').value;
            mostrarReservaCliente(aerolinea, ruta, vuelo);
        }

        actualizarPasos('cliente', paso);
    }

    function cargarRutasCliente(aerolinea) {
        const select = document.getElementById('rutaCliente');
        select.innerHTML = '<option value="">Seleccione una ruta...</option>';

        if (aerolinea && datos.aerolineas[aerolinea]) {
            Object.keys(datos.aerolineas[aerolinea].rutas).forEach(rutaId => {
                const ruta = datos.aerolineas[aerolinea].rutas[rutaId];
                const option = document.createElement('option');
                option.value = rutaId;
                option.textContent = `${rutaId} - ${ruta.nombre}`;
                select.appendChild(option);
            });
        }
    }

    function cargarVuelosCliente(aerolinea, ruta) {
        const select = document.getElementById('vueloCliente');
        select.innerHTML = '<option value="">Seleccione un vuelo...</option>';

        if (aerolinea && ruta && datos.aerolineas[aerolinea].rutas[ruta]) {
            Object.keys(datos.aerolineas[aerolinea].rutas[ruta].vuelos).forEach(vueloId => {
                const vuelo = datos.aerolineas[aerolinea].rutas[ruta].vuelos[vueloId];
                const option = document.createElement('option');
                option.value = vueloId;
                option.textContent = `${vueloId} - ${vuelo.fecha}`;
                select.appendChild(option);
            });
        }
    }

    function mostrarReservaCliente(aerolinea, ruta, vuelo) {
        const container = document.getElementById('reservaClienteDetalle');

        if (aerolinea && ruta && vuelo && datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo]) {
            const vueloData = datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo];
            const reserva = vueloData.reservas.find(r => r.cliente === 'María González');

            if (reserva) {
                container.innerHTML = `
                    <div class="card border-success">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5 class="text-success">Reserva Confirmada</h5>
                                    <p class="mb-1"><strong>Código:</strong> ${reserva.id}</p>
                                    <p class="mb-1"><strong>Vuelo:</strong> ${vuelo} - ${datos.aerolineas[aerolinea].rutas[ruta].nombre}</p>
                                    <p class="mb-1"><strong>Fecha:</strong> ${vueloData.fecha}</p>
                                    <p class="mb-1"><strong>Aerolínea:</strong> ${datos.aerolineas[aerolinea].nombre}</p>
                                </div>
                                <div class="col-md-6">
                                    <p class="mb-1"><strong>Estado:</strong> <span class="badge bg-success">${reserva.estado}</span></p>
                                    <p class="mb-1"><strong>Fecha Reserva:</strong> ${reserva.fechaReserva}</p>
                                    <p class="mb-1"><strong>Tipo Asiento:</strong> ${reserva.tipoAsiento}</p>
                                    <p class="mb-1"><strong>Costo Total:</strong> $${reserva.costoTotal}</p>
                                </div>
                            </div>

                            <div class="mt-4">
                                <h6>Pasajeros</h6>
                                ${reserva.pasajeros.map(pasajero => `
                                    <div class="pasajero-item">
                                        <i class="bi bi-person"></i> ${pasajero}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="alert alert-warning text-center">
                        <h5>No tiene reserva en este vuelo</h5>
                        <p>No se encontró una reserva a su nombre para el vuelo seleccionado.</p>
                        <a href="reserva-vuelo.html" class="btn btn-primary">Realizar Reserva</a>
                    </div>
                `;
            }
        }
    }

    // Funciones para Aerolínea
    function siguientePasoAerolinea(paso) {
        if (paso === 4 && reservaSeleccionada) {
            mostrarReservaAerolinea();
        }

        actualizarPasos('aerolinea', paso);
    }

    function cargarRutasAerolinea() {
        const select = document.getElementById('rutaAerolinea');
        select.innerHTML = '<option value="">Seleccione una ruta...</option>';

        const aerolinea = datos.aerolineaActual;
        if (datos.aerolineas[aerolinea]) {
            Object.keys(datos.aerolineas[aerolinea].rutas).forEach(rutaId => {
                const ruta = datos.aerolineas[aerolinea].rutas[rutaId];
                const option = document.createElement('option');
                option.value = rutaId;
                option.textContent = `${rutaId} - ${ruta.nombre}`;
                select.appendChild(option);
            });
        }
    }

    function cargarVuelosAerolinea(ruta) {
        const select = document.getElementById('vueloAerolinea');
        select.innerHTML = '<option value="">Seleccione un vuelo...</option>';

        const aerolinea = datos.aerolineaActual;
        if (ruta && datos.aerolineas[aerolinea].rutas[ruta]) {
            Object.keys(datos.aerolineas[aerolinea].rutas[ruta].vuelos).forEach(vueloId => {
                const vuelo = datos.aerolineas[aerolinea].rutas[ruta].vuelos[vueloId];
                const option = document.createElement('option');
                option.value = vueloId;
                option.textContent = `${vueloId} - ${vuelo.fecha} (${vuelo.reservas.length} reservas)`;
                select.appendChild(option);
            });
        }
    }

    function cargarReservasAerolinea(ruta, vuelo) {
        const container = document.getElementById('listaReservasAerolinea');
        container.innerHTML = '';

        const aerolinea = datos.aerolineaActual;
        if (ruta && vuelo && datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo]) {
            const reservas = datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo].reservas;

            if (reservas.length === 0) {
                container.innerHTML = '<div class="col-12"><p class="text-muted text-center">No hay reservas para este vuelo.</p></div>';
                return;
            }

            reservas.forEach((reserva, index) => {
                const reservaHTML = `
                    <div class="col-md-6">
                        <div class="reserva-card" onclick="seleccionarReservaAerolinea(${index})">
                            <div class="card-body">
                                <h6 class="card-title">${reserva.id}</h6>
                                <p class="card-text mb-1">Cliente: ${reserva.cliente}</p>
                                <p class="card-text mb-1">Pasajeros: ${reserva.pasajeros.length}</p>
                                <p class="card-text mb-1">Asiento: ${reserva.tipoAsiento}</p>
                                <span class="badge bg-success">${reserva.estado}</span>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += reservaHTML;
            });

            document.getElementById('btnAerolinea3').disabled = false;
        }
    }

    function seleccionarReservaAerolinea(index) {
        const ruta = document.getElementById('rutaAerolinea').value;
        const vuelo = document.getElementById('vueloAerolinea').value;
        const aerolinea = datos.aerolineaActual;

        if (ruta && vuelo && datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo]) {
            reservaSeleccionada = datos.aerolineas[aerolinea].rutas[ruta].vuelos[vuelo].reservas[index];

            // Remover selección anterior y marcar actual
            document.querySelectorAll('#flujoAerolinea .reserva-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }
    }

    function mostrarReservaAerolinea() {
        const container = document.getElementById('reservaAerolineaDetalle');

        if (reservaSeleccionada) {
            container.innerHTML = `
                <div class="card border-primary">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-primary">Detalles de la Reserva</h5>
                                <p class="mb-1"><strong>Código:</strong> ${reservaSeleccionada.id}</p>
                                <p class="mb-1"><strong>Cliente:</strong> ${reservaSeleccionada.cliente}</p>
                                <p class="mb-1"><strong>Fecha Reserva:</strong> ${reservaSeleccionada.fechaReserva}</p>
                                <p class="mb-1"><strong>Estado:</strong> <span class="badge bg-success">${reservaSeleccionada.estado}</span></p>
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong>Tipo Asiento:</strong> ${reservaSeleccionada.tipoAsiento}</p>
                                <p class="mb-1"><strong>Cantidad Pasajes:</strong> ${reservaSeleccionada.cantidadPasajes}</p>
                                <p class="mb-1"><strong>Equipaje Extra:</strong> ${reservaSeleccionada.equipajeExtra}</p>
                                <p class="mb-1"><strong>Costo Total:</strong> $${reservaSeleccionada.costoTotal}</p>
                            </div>
                        </div>

                        <div class="mt-4">
                            <h6>Lista de Pasajeros</h6>
                            ${reservaSeleccionada.pasajeros.map(pasajero => `
                                <div class="pasajero-item">
                                    <i class="bi bi-person"></i> <strong>${pasajero}</strong>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
    }

    // Funciones generales
    function actualizarPasos(tipo, pasoActivo) {
        const prefix = tipo === 'cliente' ? 'Cliente' : 'Aerolinea';

        // Ocultar todas las secciones
        document.querySelectorAll(`#flujo${prefix} .form-section`).forEach(section => {
            section.classList.remove('active');
        });

        // Mostrar sección activa
        document.getElementById(`section${prefix}${pasoActivo}`).classList.add('active');

        // Actualizar indicadores de paso
        document.querySelectorAll(`#flujo${prefix} .step`).forEach(step => {
            step.classList.remove('active', 'completed');
        });

        for (let i = 1; i <= pasoActivo; i++) {
            const stepEl = document.getElementById(`step${prefix}${i}`);
            if (i === pasoActivo) {
                stepEl.classList.add('active');
            } else {
                stepEl.classList.add('completed');
            }
        }
    }

    function cambiarTipoUsuario() {
        tipoUsuario = tipoUsuario === 'cliente' ? 'aerolinea' : 'cliente';

        document.getElementById('flujoCliente').style.display = tipoUsuario === 'cliente' ? 'block' : 'none';
        document.getElementById('flujoAerolinea').style.display = tipoUsuario === 'aerolinea' ? 'block' : 'none';

        document.getElementById('tipoUsuarioTexto').textContent = tipoUsuario === 'cliente' ? 'Cliente' : 'Aerolínea';
        document.getElementById('tipoAlternativo').textContent = tipoUsuario === 'cliente' ? 'Aerolínea' : 'Cliente';
        document.getElementById('nombreUsuario').textContent = tipoUsuario === 'cliente' ? 'María González' : 'ZulyFly Airlines';

        // Reiniciar ambos flujos
        siguientePasoCliente(1);
        siguientePasoAerolinea(1);
    }

    function nuevaConsulta() {
        if (tipoUsuario === 'cliente') {
            siguientePasoCliente(1);
            document.getElementById('formCliente').reset();
        } else {
            siguientePasoAerolinea(1);
            document.getElementById('formAerolinea').reset();
            reservaSeleccionada = null;
        }
    }
</script>
</body>
</html>