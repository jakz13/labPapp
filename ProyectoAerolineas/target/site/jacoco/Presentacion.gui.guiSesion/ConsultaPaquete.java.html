<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConsultaPaquete.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">MiProyectoSwing</a> &gt; <a href="index.source.html" class="el_package">Presentacion.gui.guiSesion</a> &gt; <span class="el_source">ConsultaPaquete.java</span></div><h1>ConsultaPaquete.java</h1><pre class="source lang-java linenums">package Presentacion.gui.guiSesion;

import DataTypes.*;
import Logica.Fabrica;
import Logica.ISistema;

import javax.swing.*;
import java.awt.*;

public class ConsultaPaquete {
    private JPanel PanelConsultaPaquete;
    private JComboBox&lt;DtPaquete&gt; comboboxPaquetes;
    private JTextPane InfoPaquetes;
    private JComboBox&lt;DtRutaVuelo&gt; comboBoxRutaVuelo;
    private JTextArea textAreaInfoRuta;
    private JButton cerrarButton;

    private ISistema sistema;

<span class="nc" id="L20">    public ConsultaPaquete() {</span>
<span class="nc" id="L21">        sistema = Fabrica.getInstance().getISistema();</span>

        // Cargar paquetes al iniciar
<span class="nc" id="L24">        cargarPaquetes();</span>

        // Al seleccionar un paquete, mostrar su información
<span class="nc" id="L27">        comboboxPaquetes.addActionListener(e -&gt; actualizarInfoPaquete());</span>

        // Al seleccionar una ruta dentro del paquete, mostrar su info detallada
<span class="nc" id="L30">        comboBoxRutaVuelo.addActionListener(e -&gt; actualizarInfoRuta());</span>

        // Botón cerrar
<span class="nc" id="L33">        cerrarButton.addActionListener(e -&gt; {</span>
<span class="nc" id="L34">            JFrame topFrame = (JFrame) SwingUtilities.getWindowAncestor(PanelConsultaPaquete);</span>
<span class="nc bnc" id="L35" title="All 2 branches missed.">            if (topFrame != null) {</span>
<span class="nc" id="L36">                topFrame.dispose();</span>
            }
<span class="nc" id="L38">        });</span>
<span class="nc" id="L39">    }</span>

    private void cargarPaquetes() {
<span class="nc" id="L42">        DefaultComboBoxModel&lt;DtPaquete&gt; modeloPaquetes = new DefaultComboBoxModel&lt;&gt;();</span>
<span class="nc bnc" id="L43" title="All 2 branches missed.">        for (DtPaquete p : sistema.listarPaquetes()) {</span>
<span class="nc" id="L44">            modeloPaquetes.addElement(p);</span>
<span class="nc" id="L45">        }</span>
<span class="nc" id="L46">        comboboxPaquetes.setModel(modeloPaquetes);</span>
<span class="nc" id="L47">        comboboxPaquetes.setSelectedIndex(-1);</span>
<span class="nc" id="L48">    }</span>

    private void actualizarInfoPaquete() {
<span class="nc" id="L51">        DtPaquete seleccionado = (DtPaquete) comboboxPaquetes.getSelectedItem();</span>
<span class="nc bnc" id="L52" title="All 2 branches missed.">        if (seleccionado != null) {</span>
<span class="nc" id="L53">            StringBuilder info = new StringBuilder();</span>
<span class="nc" id="L54">            info.append(&quot;Nombre: &quot;).append(seleccionado.getNombre()).append(&quot;\n&quot;)</span>
<span class="nc" id="L55">                    .append(&quot;Descripción: &quot;).append(seleccionado.getDescripcion()).append(&quot;\n&quot;)</span>
<span class="nc" id="L56">                    .append(&quot;Costo base: &quot;).append(seleccionado.getCosto()).append(&quot;\n&quot;)</span>
<span class="nc" id="L57">                    .append(&quot;Descuento: &quot;).append(seleccionado.getDescuentoPorc()).append(&quot;%\n&quot;)</span>
<span class="nc" id="L58">                    .append(&quot;Validez: &quot;).append(seleccionado.getPeriodoValidezDias()).append(&quot; días\n&quot;)</span>
<span class="nc" id="L59">                    .append(&quot;Rutas incluidas:\n&quot;);</span>

            // Llenar ComboBox de rutas
<span class="nc" id="L62">            DefaultComboBoxModel&lt;DtRutaVuelo&gt; modeloRutas = new DefaultComboBoxModel&lt;&gt;();</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">            for (DtItemPaquete item : sistema.getDtItemRutasPaquete(seleccionado.getNombre())) {</span>
<span class="nc" id="L64">                DtRutaVuelo ruta = item.getRutaVuelo();</span>
<span class="nc bnc" id="L65" title="All 2 branches missed.">                if (ruta != null) {</span>
<span class="nc" id="L66">                    modeloRutas.addElement(ruta);</span>
<span class="nc" id="L67">                    info.append(&quot;  - &quot;).append(ruta.getNombre())</span>
<span class="nc" id="L68">                            .append(&quot; (&quot;).append(item.getTipoAsiento())</span>
<span class="nc" id="L69">                            .append(&quot;, Asientos: &quot;).append(item.getCantAsientos())</span>
<span class="nc" id="L70">                            .append(&quot;)\n&quot;);</span>
                }
<span class="nc" id="L72">            }</span>
<span class="nc" id="L73">            comboBoxRutaVuelo.setModel(modeloRutas);</span>

<span class="nc" id="L75">            InfoPaquetes.setText(info.toString());</span>
<span class="nc" id="L76">        } else {</span>
<span class="nc" id="L77">            InfoPaquetes.setText(&quot;&quot;);</span>
<span class="nc" id="L78">            comboBoxRutaVuelo.setModel(new DefaultComboBoxModel&lt;&gt;());</span>
        }
<span class="nc" id="L80">        textAreaInfoRuta.setText(&quot;&quot;); // limpiar info de ruta</span>
<span class="nc" id="L81">    }</span>

    private void actualizarInfoRuta() {
<span class="nc" id="L84">        DtRutaVuelo seleccionada = (DtRutaVuelo) comboBoxRutaVuelo.getSelectedItem();</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">        if (seleccionada != null) {</span>
<span class="nc" id="L86">            StringBuilder info = new StringBuilder();</span>
<span class="nc" id="L87">            info.append(&quot;Nombre Ruta: &quot;).append(seleccionada.getNombre()).append(&quot;\n&quot;)</span>
<span class="nc" id="L88">                    .append(&quot;Origen: &quot;).append(seleccionada.getCiudadOrigen()).append(&quot;\n&quot;)</span>
<span class="nc" id="L89">                    .append(&quot;Destino: &quot;).append(seleccionada.getCiudadDestino()).append(&quot;\n&quot;)</span>
<span class="nc" id="L90">                    .append(&quot;Duración estimada: &quot;).append(seleccionada.getHora()).append(&quot;\n&quot;)</span>
<span class="nc" id="L91">                    .append(&quot;Fecha de Alta: &quot;).append(seleccionada.getFechaAlta()).append(&quot;\n&quot;)</span>
<span class="nc" id="L92">                    .append(&quot;Costo Turista: &quot;).append(seleccionada.getCostoTurista()).append(&quot;\n&quot;)</span>
<span class="nc" id="L93">                    .append(&quot;Costo Ejecutivo: &quot;).append(seleccionada.getCostoEjecutivo()).append(&quot;\n&quot;)</span>
<span class="nc" id="L94">                    .append(&quot;Vuelos asociados:\n&quot;);</span>

            // Mostrar los vuelos de la ruta
<span class="nc bnc" id="L97" title="All 2 branches missed.">            for (DtVuelo v : sistema.listarVuelosPorRuta(seleccionada.getNombre())) {</span>
<span class="nc" id="L98">                info.append(&quot;  - &quot;).append(v.getNombre())</span>
<span class="nc" id="L99">                        .append(&quot; | Fecha: &quot;).append(v.getFecha())</span>
<span class="nc" id="L100">                        .append(&quot; | Duración: &quot;).append(v.getDuracion()).append(&quot;h\n&quot;);</span>
<span class="nc" id="L101">            }</span>

<span class="nc" id="L103">            textAreaInfoRuta.setText(info.toString());</span>
<span class="nc" id="L104">        } else {</span>
<span class="nc" id="L105">            textAreaInfoRuta.setText(&quot;&quot;);</span>
        }
<span class="nc" id="L107">    }</span>

    public Container getPanelConsultaPaquete() {
<span class="nc" id="L110">        return PanelConsultaPaquete;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>