<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Consulta de Ruta de Vuelo - Juan Viajes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .user-actions {
            display: flex;
            gap: 10px;
        }
        .card {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .card-header {
            background: linear-gradient(135deg, #3498db, #8e44ad);
            border-bottom: none;
        }
        .ruta-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .ruta-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }
        .ruta-card.selected {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        .ruta-image {
            height: 200px;
            object-fit: cover;
            border-radius: 8px 8px 0 0;
        }
        .info-badge {
            background-color: #e9ecef;
            color: #495057;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        .costo-destacado {
            font-size: 1.2rem;
            font-weight: bold;
            color: #28a745;
        }
        .dropdown-menu {
            border: none;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        .dropdown-item:hover {
            background-color: #3498db;
            color: white;
        }
        .filter-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="PaginaPrincipal.html">Juan Viajes</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
            <li class="nav-item">
                <a class="nav-link" href="PaginaPrincipal.html">Inicio</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="vuelosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Vuelos
                </a>
                <ul class="dropdown-menu" aria-labelledby="vuelosDropdown">
                    <li><a class="dropdown-item" href="consulta-vuelo.html">Consulta de Vuelo</a></li>
                    <li><a class="dropdown-item active" href="consulta-reserva.html">Consulta de Reserva</a></li>
                    <li><a class="dropdown-item" href="reserva-vuelo.html">Reserva de Vuelo</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown active">
                <a class="nav-link dropdown-toggle" href="#" id="paquetesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Paquetes
                </a>
                <ul class="dropdown-menu" aria-labelledby="paquetesDropdown">
                    <li><a class="dropdown-item" href="consulta-paquete.html">Consulta de Paquete</a></li>
                    <li><a class="dropdown-item" href="compra-paquete.html">Compra de Paquete</a></li>
                    <li><a class="dropdown-item active" href="alta-paquete.html">Alta de Paquete</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="aerolineasDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Aerolíneas
                </a>
                <ul class="dropdown-menu" aria-labelledby="aerolineasDropdown">
                    <li><a class="dropdown-item" href="alta-ruta.html">Alta de Ruta</a></li>
                    <li><a class="dropdown-item" href="consulta-ruta.html">Consulta de Ruta</a></li>
                    <li><a class="dropdown-item" href="alta-vuelo.html">Alta de Vuelo</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="usuariosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Usuarios
                </a>
                <ul class="dropdown-menu" aria-labelledby="usuariosDropdown">
                    <li><a class="dropdown-item" href="alta-usuario.html">Alta de Usuario</a></li>
                    <li><a class="dropdown-item" href="consulta-usuario.html">Consulta de Usuario</a></li>
                    <li><a class="dropdown-item" href="modificar-usuario.html">Modificar Datos</a></li>
                </ul>
            </li>
        </ul>
        <div class="user-actions">
            <span class="navbar-text me-3">
                <i class="bi bi-person-gear"></i> Administrador
            </span>
            <a class="btn btn-outline-primary" href="PaginaPrincipal.html">Salir</a>
        </div>
    </div>
</nav>

<div class="container mt-4 mb-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card shadow-lg">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Consulta de Ruta de Vuelo</h4>
                    <p class="mb-0 mt-2 small">Explore las rutas de vuelo confirmadas disponibles en el sistema</p>
                </div>
                <div class="card-body p-4">

                    <!-- Filtros de búsqueda -->
                    <div class="filter-section">
                        <h5 class="mb-3">Filtrar Rutas</h5>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label for="aerolinea" class="form-label">Aerolínea</label>
                                <select class="form-select" id="aerolinea">
                                    <option value="">Todas las aerolíneas</option>
                                    <option value="zulyfly">ZulyFly</option>
                                    <option value="iberia">Iberia</option>
                                    <option value="copa">Copa Airlines</option>
                                    <option value="american">American Airlines</option>
                                    <option value="aerolineas">Aerolíneas Argentinas</option>
                                    <option value="latam">LATAM</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="categoria" class="form-label">Categoría</label>
                                <select class="form-select" id="categoria">
                                    <option value="">Todas las categorías</option>
                                    <option value="nacionales">Nacionales</option>
                                    <option value="internacionales">Internacionales</option>
                                    <option value="europa">Europa</option>
                                    <option value="america">América</option>
                                    <option value="caribe">Caribe</option>
                                    <option value="cortos">Cortos</option>
                                    <option value="exclusivos">Exclusivos</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="estado" class="form-label">Estado</label>
                                <select class="form-select" id="estado">
                                    <option value="confirmada">Confirmadas</option>
                                    <option value="todas">Todas las rutas</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-primary" onclick="filtrarRutas()">
                                <i class="bi bi-funnel"></i> Aplicar Filtros
                            </button>
                            <button class="btn btn-outline-secondary" onclick="limpiarFiltros()">
                                <i class="bi bi-arrow-clockwise"></i> Limpiar
                            </button>
                        </div>
                    </div>

                    <!-- Listado de rutas -->
                    <div class="mb-4">
                        <h5 class="mb-3">Rutas Disponibles</h5>
                        <div id="listaRutas" class="row g-3">
                            <!-- Las rutas se cargarán dinámicamente -->
                        </div>
                    </div>

                    <!-- Información detallada de la ruta seleccionada -->
                    <div id="infoRuta" class="mt-4" style="display: none;">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Información Detallada de la Ruta</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <img id="imagenRuta" src="" alt="Imagen de la ruta" class="img-fluid rounded mb-3">
                                    </div>
                                    <div class="col-md-6">
                                        <h4 id="rutaNombre" class="text-primary"></h4>
                                        <p class="lead" id="rutaDescripcionCorta"></p>

                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <p class="mb-2"><strong>Aerolínea:</strong> <span id="rutaAerolinea"></span></p>
                                                <p class="mb-2"><strong>Origen:</strong> <span id="rutaOrigen"></span></p>
                                                <p class="mb-2"><strong>Destino:</strong> <span id="rutaDestino"></span></p>
                                                <p class="mb-2"><strong>Hora salida:</strong> <span id="rutaHora"></span></p>
                                            </div>
                                            <div class="col-6">
                                                <p class="mb-2"><strong>Estado:</strong> <span id="rutaEstado" class="badge bg-success"></span></p>
                                                <p class="mb-2"><strong>Fecha alta:</strong> <span id="rutaFechaAlta"></span></p>
                                                <p class="mb-2"><strong>Categorías:</strong> <span id="rutaCategorias"></span></p>
                                            </div>
                                        </div>

                                        <!-- Costos -->
                                        <div class="mt-3 p-3 bg-light rounded">
                                            <h6>Costos de la Ruta</h6>
                                            <div class="row text-center">
                                                <div class="col-4">
                                                    <div class="costo-destacado">$<span id="costoTurista"></span></div>
                                                    <small class="text-muted">Turista</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="costo-destacado">$<span id="costoEjecutivo"></span></div>
                                                    <small class="text-muted">Ejecutivo</small>
                                                </div>
                                                <div class="col-4">
                                                    <div class="costo-destacado">$<span id="costoEquipaje"></span></div>
                                                    <small class="text-muted">Equipaje extra</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Descripción extendida -->
                                <div class="mt-4">
                                    <h6>Descripción Completa</h6>
                                    <p id="rutaDescripcion" class="text-muted"></p>
                                </div>

                                <!-- Vuelos asociados -->
                                <div class="mt-4">
                                    <h6>Vuelos Disponibles en esta Ruta</h6>
                                    <div id="vuelosAsociados" class="row g-2">
                                        <!-- Los vuelos se cargarán dinámicamente -->
                                    </div>
                                </div>

                                <!-- Acciones -->
                                <div class="d-flex gap-2 mt-4">
                                    <a href="consulta-vuelo.html" class="btn btn-primary">
                                        <i class="bi bi-search"></i> Consultar Vuelos
                                    </a>
                                    <a href="reserva-vuelo.html" class="btn btn-success">
                                        <i class="bi bi-calendar-check"></i> Reservar Vuelo
                                    </a>
                                    <button class="btn btn-outline-secondary" onclick="window.print()">
                                        <i class="bi bi-printer"></i> Imprimir
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Login -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Iniciar Sesión</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="loginEmail" class="form-label">Email o Nickname</label>
                        <input type="text" class="form-control" id="loginEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="loginPassword" class="form-label">Contraseña</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Iniciar Sesión</button>
                </form>
            </div>
            <div class="modal-footer">
                <p class="text-center w-100">¿No tienes cuenta? <a href="alta-usuario.html">Regístrate aquí</a></p>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Datos de ejemplo de rutas
    const rutasDisponibles = [
        {
            id: "ZL1502",
            nombre: "Montevideo - Rio de Janeiro",
            descripcionCorta: "Vuelo directo a las playas de Brasil",
            descripcionCompleta: "Disfrute de un vuelo directo desde Montevideo hasta la maravillosa ciudad de Rio de Janeiro. Con una duración de apenas 2 horas y 30 minutos, llegará listo para explorar las famosas playas de Copacabana e Ipanema, el Cristo Redentor y el Pan de Azúcar. Incluye servicio de comidas y bebidas a bordo.",
            aerolinea: "ZulyFly",
            origen: "Montevideo, Uruguay (MVD)",
            destino: "Rio de Janeiro, Brasil (GIG)",
            hora: "07:15",
            costoTurista: 320,
            costoEjecutivo: 550,
            costoEquipaje: 25,
            categorias: ["Internacionales", "América", "Cortos"],
            estado: "Confirmada",
            fechaAlta: "15/01/2024",
            imagen: "https://via.placeholder.com/600x400/3498db/ffffff?text=Montevideo-Rio+de+Janeiro",
            vuelos: [
                { id: "ZL1502001", fecha: "25/10/2024", disponible: true },
                { id: "ZL1502002", fecha: "26/10/2024", disponible: true },
                { id: "ZL1502003", fecha: "27/10/2024", disponible: false }
            ]
        },
        {
            id: "IB6012",
            nombre: "Montevideo - Madrid",
            descripcionCorta: "Conexión directa con Europa",
            descripcionCompleta: "Vuele directamente desde Montevideo hasta Madrid en nuestro servicio premium. Disfrute de entretenimiento a bordo en todos los asientos, comidas gourmet y servicio de primera clase. Perfecto para viajes de negocios o placer.",
            aerolinea: "Iberia",
            origen: "Montevideo, Uruguay (MVD)",
            destino: "Madrid, España (MAD)",
            hora: "22:00",
            costoTurista: 750,
            costoEjecutivo: 1200,
            costoEquipaje: 30,
            categorias: ["Internacionales", "Europa"],
            estado: "Confirmada",
            fechaAlta: "10/02/2024",
            imagen: "https://via.placeholder.com/600x400/8e44ad/ffffff?text=Montevideo-Madrid",
            vuelos: [
                { id: "IB6012201", fecha: "28/10/2024", disponible: true },
                { id: "IB6012202", fecha: "29/10/2024", disponible: true }
            ]
        },
        {
            id: "CN804",
            nombre: "Ciudad de Panamá - Nueva York",
            descripcionCorta: "De Centroamérica a la gran manzana",
            descripcionCompleta: "Conecte desde Ciudad de Panamá hasta Nueva York en este vuelo internacional. Copa Airlines ofrece un servicio excepcional con comidas, bebidas y entretenimiento a bordo para hacer su viaje más placentero.",
            aerolinea: "Copa Airlines",
            origen: "Ciudad de Panamá, Panamá (PTY)",
            destino: "Nueva York, USA (JFK)",
            hora: "08:30",
            costoTurista: 520,
            costoEjecutivo: 850,
            costoEquipaje: 35,
            categorias: ["Internacionales", "América"],
            estado: "Confirmada",
            fechaAlta: "05/03/2024",
            imagen: "https://via.placeholder.com/600x400/e74c3c/ffffff?text=Panamá-Nueva+York",
            vuelos: [
                { id: "CN804101", fecha: "30/10/2024", disponible: true }
            ]
        },
        {
            id: "AR2050",
            nombre: "Buenos Aires - Santiago",
            descripcionCorta: "Cruzando la cordillera de los Andes",
            descripcionCompleta: "Experimente la majestuosidad de los Andes en este vuelo entre Buenos Aires y Santiago. Disfrute de vistas panorámicas de la cordillera mientras cruza hacia Chile.",
            aerolinea: "Aerolíneas Argentinas",
            origen: "Buenos Aires, Argentina (EZE)",
            destino: "Santiago, Chile (SCL)",
            hora: "14:30",
            costoTurista: 280,
            costoEjecutivo: 480,
            costoEquipaje: 30,
            categorias: ["Internacionales", "América", "Cortos"],
            estado: "Confirmada",
            fechaAlta: "20/01/2024",
            imagen: "https://via.placeholder.com/600x400/2ecc71/ffffff?text=Bs+As-Santiago",
            vuelos: [
                { id: "AR205001", fecha: "01/11/2024", disponible: true },
                { id: "AR205002", fecha: "02/11/2024", disponible: true }
            ]
        }
    ];

    // Cargar rutas al iniciar la página
    document.addEventListener('DOMContentLoaded', function() {
        cargarRutas(rutasDisponibles);
    });

    function cargarRutas(rutas) {
        const container = document.getElementById('listaRutas');
        container.innerHTML = '';

        if (rutas.length === 0) {
            container.innerHTML = `
                <div class="col-12 text-center py-4">
                    <p class="text-muted">No se encontraron rutas con los filtros seleccionados.</p>
                    <button class="btn btn-outline-primary" onclick="limpiarFiltros()">Mostrar todas las rutas</button>
                </div>
            `;
            return;
        }

        rutas.forEach(ruta => {
            const rutaHTML = `
                <div class="col-md-6">
                    <div class="card ruta-card h-100" onclick="mostrarDetallesRuta('${ruta.id}')">
                        <img src="${ruta.imagen}" class="ruta-image" alt="${ruta.nombre}">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="card-title">${ruta.nombre}</h6>
                                <span class="info-badge">${ruta.id}</span>
                            </div>
                            <p class="card-text small text-muted">${ruta.descripcionCorta}</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-primary fw-bold">${ruta.aerolinea}</span>
                                <span class="costo-destacado">$${ruta.costoTurista}</span>
                            </div>
                            <div class="mt-2">
                                ${ruta.categorias.map(cat => `<span class="badge bg-secondary me-1">${cat}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += rutaHTML;
        });
    }

    function mostrarDetallesRuta(rutaId) {
        const ruta = rutasDisponibles.find(r => r.id === rutaId);

        if (!ruta) return;

        // Actualizar información de la ruta
        document.getElementById('rutaNombre').textContent = ruta.nombre;
        document.getElementById('rutaDescripcionCorta').textContent = ruta.descripcionCorta;
        document.getElementById('rutaDescripcion').textContent = ruta.descripcionCompleta;
        document.getElementById('rutaAerolinea').textContent = ruta.aerolinea;
        document.getElementById('rutaOrigen').textContent = ruta.origen;
        document.getElementById('rutaDestino').textContent = ruta.destino;
        document.getElementById('rutaHora').textContent = ruta.hora;
        document.getElementById('rutaEstado').textContent = ruta.estado;
        document.getElementById('rutaFechaAlta').textContent = ruta.fechaAlta;
        document.getElementById('rutaCategorias').textContent = ruta.categorias.join(', ');
        document.getElementById('costoTurista').textContent = ruta.costoTurista;
        document.getElementById('costoEjecutivo').textContent = ruta.costoEjecutivo;
        document.getElementById('costoEquipaje').textContent = ruta.costoEquipaje;
        document.getElementById('imagenRuta').src = ruta.imagen;

        // Cargar vuelos asociados
        const vuelosContainer = document.getElementById('vuelosAsociados');
        vuelosContainer.innerHTML = '';

        ruta.vuelos.forEach(vuelo => {
            const vueloHTML = `
                <div class="col-md-4">
                    <div class="card ${vuelo.disponible ? 'border-success' : 'border-secondary'}">
                        <div class="card-body text-center">
                            <h6 class="card-title">${vuelo.id}</h6>
                            <p class="mb-1">${vuelo.fecha}</p>
                            <span class="badge ${vuelo.disponible ? 'bg-success' : 'bg-secondary'}">
                                ${vuelo.disponible ? 'Disponible' : 'Completo'}
                            </span>
                        </div>
                    </div>
                </div>
            `;
            vuelosContainer.innerHTML += vueloHTML;
        });

        // Mostrar sección de información
        document.getElementById('infoRuta').style.display = 'block';

        // Remover selección anterior y marcar actual
        document.querySelectorAll('.ruta-card').forEach(card => {
            card.classList.remove('selected');
        });
        event.currentTarget.classList.add('selected');

        // Scroll a la información de la ruta
        document.getElementById('infoRuta').scrollIntoView({ behavior: 'smooth' });
    }

    function filtrarRutas() {
        const aerolineaFiltro = document.getElementById('aerolinea').value;
        const categoriaFiltro = document.getElementById('categoria').value;
        const estadoFiltro = document.getElementById('estado').value;

        let rutasFiltradas = rutasDisponibles.filter(ruta => {
            const coincideAerolinea = !aerolineaFiltro ||
                ruta.aerolinea.toLowerCase().includes(aerolineaFiltro.toLowerCase());
            const coincideCategoria = !categoriaFiltro ||
                ruta.categorias.some(cat => cat.toLowerCase().includes(categoriaFiltro.toLowerCase()));
            const coincideEstado = estadoFiltro === 'todas' || ruta.estado === 'Confirmada';

            return coincideAerolinea && coincideCategoria && coincideEstado;
        });

        cargarRutas(rutasFiltradas);
        document.getElementById('infoRuta').style.display = 'none';
    }

    function limpiarFiltros() {
        document.getElementById('aerolinea').value = '';
        document.getElementById('categoria').value = '';
        document.getElementById('estado').value = 'confirmada';
        cargarRutas(rutasDisponibles);
        document.getElementById('infoRuta').style.display = 'none';
    }

    // Mejorar la experiencia de usuario
    document.addEventListener('DOMContentLoaded', function() {
        // Agregar tooltips si es necesario
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>
</body>
</html>